# Асинхронная TCP система Ping-Pong (Python asyncio)

Полностью асинхронная клиент-сервер система на Python 3.10 с использованием asyncio.
Реализует собственный текстовый TCP-протокол, симуляцию потерь сообщений, keepalive-рассылку и подробное логирование.

Проект разработан с упором на читаемость кода, корректную конкурентную работу и точное соблюдение технического задания.

---

##  Возможности

* Асинхронный TCP сервер на asyncio streams
* Два клиента в отдельных процессах
* Случайные интервалы отправки запросов (300–3000 мс)
* Случайная задержка ответа сервера (100–1000 мс)
* 10% вероятность игнорирования запросов
* Сквозная нумерация всех ответов сервера
* Рассылка keepalive каждые 5 секунд
* Подробные логи сервера и клиентов
* Автоматическая остановка через 5 минут

---

##  Структура проекта

```
async_tcp_system/
│
├── server.py       # Асинхронный TCP сервер
├── client.py       # Реализация TCP клиента
├── run_all.py      # Запуск сервера и двух клиентов
├── logs/
│   ├── server.log
│   ├── client1.log
│   └── client2.log
└── README.md
```

---

##  Требования

* Python 3.10+
* Windows / Linux / macOS

Сторонние библиотеки не используются.

---

##  Запуск проекта

### 1. Создать виртуальное окружение (по желанию)

```bash
python -m venv venv
```

### 2. Активировать (Windows)

```powershell
venv\Scripts\activate
```

### 3. Запустить систему

```bash
python run_all.py
```

Система автоматически работает 5 минут и корректно завершается.

---

##  Формат логов

### Лог сервера

```
ГГГГ-ММ-ДД;ЧЧ:ММ:СС.мс;ЗАПРОС;ЧЧ:ММ:СС.мс;ОТВЕТ
```

Для проигнорированных сообщений:

```
ГГГГ-ММ-ДД;ЧЧ:ММ:СС.мс;ЗАПРОС;(проигнорировано);(проигнорировано)
```

### Лог клиента

```
ДАТА;ВРЕМЯ_ОТПРАВКИ;ЗАПРОС;ВРЕМЯ_ОТВЕТА;ОТВЕТ
```

Для таймаута:

```
ДАТА;ВРЕМЯ_ОТПРАВКИ;ЗАПРОС;ВРЕМЯ;(таймаут)
```

Сообщения keepalive записываются без данных запроса.

---

##  Протокол обмена

### Клиент → Сервер

```
[номер_запроса] PING\n
```

### Сервер → Клиент

```
[номер_ответа/номер_запроса] PONG (номер_клиента)\n
```

### Сервер → все клиенты

```
[номер_ответа] keepalive\n
```

---

##  Архитектура

* Неблокирующий ввод/вывод через asyncio
* Параллельная обработка подключений
* Фоновая корутина для keepalive
* Точная фиксация времени с миллисекундами
* Изоляция клиентов в отдельных процессах

---

##  Назначение проекта

* Практика асинхронного сетевого программирования
* Демонстрация TCP взаимодействия
* Работа с таймингами и логированием
* Моделирование нестабильной сети

---

##  Автор

Проект выполнен как техническое задание для демонстрации навыков asyncio и сетевой архитектуры.

---

##  Лицензия

MIT License
